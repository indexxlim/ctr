# 문제 해결 가이드

## ❌ "실행할 수 없음: 필요한 파일이 없습니다"

### 문제
```bash
bash: ./run_all_models.sh: 실행할 수 없음: 필요한 파일이 없습니다
```

### 원인
Windows 스타일 줄바꿈 (CRLF) 때문에 발생하는 문제입니다.

### 해결 방법

**방법 1: 자동 수정 스크립트**
```bash
cd /home/lim/project/RE-SORT/SOTAS

# 모든 .sh 파일의 줄바꿈 수정
for file in *.sh; do sed -i 's/\r$//' "$file"; done

# 실행 권한 추가
chmod +x *.sh

# 확인
file *.sh
```

**방법 2: 개별 파일 수정**
```bash
# 각 파일마다 실행
sed -i 's/\r$//' run_all_models.sh
sed -i 's/\r$//' run_single_model.sh
sed -i 's/\r$//' check_gpu.sh

chmod +x *.sh
```

**방법 3: dos2unix 사용 (있는 경우)**
```bash
# dos2unix 설치 (Ubuntu/Debian)
sudo apt install dos2unix

# 변환
dos2unix *.sh
chmod +x *.sh
```

### 확인
```bash
# 파일 형식 확인 (CRLF가 없어야 함)
file *.sh

# 정상적인 출력:
# check_gpu.sh:        Bourne-Again shell script, UTF-8 text executable
# run_all_models.sh:   Bourne-Again shell script, UTF-8 text executable
# run_single_model.sh: Bourne-Again shell script, UTF-8 text executable
```

---

## ❌ "Permission denied"

### 문제
```bash
bash: ./run_all_models.sh: Permission denied
```

### 해결
```bash
chmod +x *.sh
```

---

## ❌ GPU 관련 에러

### 1. "nvidia-smi not found"

**해결:**
```bash
# CPU 모드로 실행
./run_all_models.sh -1
./run_single_model.sh Baseline

# 또는 NVIDIA 드라이버 설치 (INSTALL_NVIDIA.md 참고)
```

### 2. GPU가 계속 busy

**현재 상태:**
```bash
./check_gpu.sh 0
# GPU 0 Status:
#   Memory: 29969MB / 32607MB (91%)
#   Utilization: 89%
#   Status: Busy (memory usage 91% >= 10%)
```

**해결:**
```bash
# 옵션 1: threshold 높이기
./run_all_models.sh 0 30    # 30% 미만일 때 시작

# 옵션 2: 대기 시간 늘리기
./run_all_models.sh 0 10 7200  # 2시간까지 대기

# 옵션 3: 다른 GPU 사용
./run_all_models.sh 1

# 옵션 4: CPU 모드
./run_all_models.sh -1
```

---

## ❌ 모듈 없음 에러

### 문제
```python
ModuleNotFoundError: No module named 're_sortctr_version'
```

### 해결
```bash
# 필요한 패키지 설치
cd /home/lim/project/RE-SORT
pip install -e .

# 또는
pip install -r requirements.txt
```

---

## ✅ 정상 작동 확인

### 1. 스크립트 테스트
```bash
cd /home/lim/project/RE-SORT/SOTAS

# 도움말 확인
./run_single_model.sh

# GPU 상태 확인
./check_gpu.sh 0

# 파일 형식 확인
file *.sh
```

### 2. 예상 출력
```bash
$ ./run_single_model.sh
Usage: ./run_single_model.sh <model_name> [gpu_id] [expid] [gpu_threshold] [max_wait_time]

Arguments:
  model_name: Name of the model to run (required)
  gpu_id: GPU device ID [default: -1 (CPU)]
  expid: Experiment ID [default: none]
  gpu_threshold: GPU memory threshold % [default: 10]
  max_wait_time: Max wait time in seconds [default: 3600]

Available models:
  Baseline
  Baseline_DoubleStream
  ...
```

```bash
$ ./check_gpu.sh 0
GPU 0 Status:
  Memory: 29969MB / 32607MB (91%)
  Utilization: 89%
  Status: Busy (memory usage 91% >= 10%)
```

---

## 🔧 종합 수정 스크립트

모든 문제를 한 번에 해결:

```bash
cd /home/lim/project/RE-SORT/SOTAS

# 1. 줄바꿈 수정
for file in *.sh; do sed -i 's/\r$//' "$file"; done

# 2. 실행 권한 추가
chmod +x *.sh

# 3. 확인
echo "=== 파일 형식 확인 ==="
file *.sh

echo ""
echo "=== GPU 상태 확인 ==="
./check_gpu.sh 0 || echo "GPU 사용 불가. CPU 모드로 실행하세요: ./run_all_models.sh -1"

echo ""
echo "=== 도움말 ==="
./run_single_model.sh
```

---

## 📞 추가 도움이 필요한 경우

1. **상세 문서**: [README.md](README.md)
2. **빠른 시작**: [QUICK_START.md](QUICK_START.md)
3. **사용 예시**: [USAGE_SUMMARY.md](USAGE_SUMMARY.md)
